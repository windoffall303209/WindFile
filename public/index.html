<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drive Uploader</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
  
  <!-- JavaScript -->
  <script defer src="script.js"></script>
</head>
<body>
  <div class="main-container">
    <div class="upload-container">
      <h1 class="main-title">ğŸ“¤ Drive Uploader</h1>
      <p class="subtitle">Upload file lÃªn Google Drive dá»… dÃ ng vÃ  nhanh chÃ³ng</p>

      <!-- Auth Section -->
      <div class="auth-section mb-4">
        <!-- Loading state -->
        <div class="loading" id="authLoading">
          <span class="spinner"></span>
          Äang kiá»ƒm tra tráº¡ng thÃ¡i Ä‘Äƒng nháº­p...
        </div>

        <!-- Login button (hiá»ƒn thá»‹ khi chÆ°a Ä‘Äƒng nháº­p) -->
        <div class="text-center">
          <a href="/login" class="login-btn" id="loginBtn" style="display: none;">
            ğŸ” ÄÄƒng nháº­p báº±ng Google
          </a>
        </div>

        <!-- User profile (hiá»ƒn thá»‹ khi Ä‘Ã£ Ä‘Äƒng nháº­p) -->
        <div class="user-profile" id="userProfile">
          <div class="user-info">
            <img src="" alt="Avatar" class="user-avatar" id="userAvatar">
            <div class="user-details">
              <h3 id="userName" class="tooltip" data-tooltip="">Loading...</h3>
              <p id="userEmail" class="tooltip" data-tooltip="">Loading...</p>
            </div>
          </div>
          <button class="logout-btn" id="logoutBtn">
            ğŸšª ÄÄƒng xuáº¥t
          </button>
        </div>
      </div>

      <!-- Main Content (hiá»ƒn thá»‹ khi Ä‘Ã£ Ä‘Äƒng nháº­p) -->
      <div id="mainContent" style="display: none;">
        <!-- Tab Navigation -->
        <div class="tab-navigation">
          <button class="tab-btn active" data-tab="upload">ğŸ“¤ Upload File</button>
          <button class="tab-btn" data-tab="manage">ğŸ“ Quáº£n lÃ½ File</button>
        </div>

        <!-- Upload Tab -->
        <div class="tab-content active" id="uploadTab">
          <div class="upload-section">
            <form id="uploadForm" enctype="multipart/form-data">
              <div class="file-input-wrapper">
                <input type="file" name="file" id="fileInput" class="file-input" required />
                <label for="fileInput" class="file-input-label" id="fileLabel">
                  ğŸ“ Chá»n file Ä‘á»ƒ upload<br>
                  <small>KÃ©o tháº£ file vÃ o Ä‘Ã¢y hoáº·c click Ä‘á»ƒ chá»n (Tá»‘i Ä‘a 1GB)</small>
                </label>
              </div>

              <div class="file-info" id="fileInfo">
                <div class="stats">
                  <div class="stat-item">
                    <div class="stat-label">TÃªn file</div>
                    <div class="stat-value filename tooltip" id="fileName" data-tooltip="">-</div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-label">KÃ­ch thÆ°á»›c</div>
                    <div class="stat-value" id="fileSize">-</div>
                  </div>
                  <div class="stat-item">
                    <div class="stat-label">Loáº¡i file</div>
                    <div class="stat-value" id="fileType">-</div>
                  </div>
                </div>
              </div>

              <div class="text-center">
                <button type="submit" class="upload-btn" id="uploadBtn" disabled>
                  ğŸš€ Táº£i lÃªn Google Drive
                </button>
              </div>
            </form>

            <!-- Progress vÃ  status -->
            <div class="progress-container" id="progressContainer">
              <div class="status-text" id="statusText">
                <span class="spinner"></span>
                Äang chuáº©n bá»‹ upload...
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
              <div class="timer text-center" id="timer">00:00</div>
              <div class="stats">
                <div class="stat-item">
                  <div class="stat-label">Tá»‘c Ä‘á»™</div>
                  <div class="stat-value" id="uploadSpeed">- MB/s</div>
                </div>
                <div class="stat-item">
                  <div class="stat-label">Thá»i gian cÃ²n láº¡i</div>
                  <div class="stat-value" id="timeRemaining">-</div>
                </div>
                <div class="stat-item">
                  <div class="stat-label">ÄÃ£ upload</div>
                  <div class="stat-value" id="uploadedSize">0%</div>
                </div>
              </div>
            </div>

            <!-- Káº¿t quáº£ -->
            <div class="result" id="result"></div>
          </div>
        </div>

        <!-- File Manager Tab -->
        <div class="tab-content" id="manageTab">
          <div class="file-manager">
            <div class="file-manager-header">
              <h2>ğŸ“ Quáº£n lÃ½ File Google Drive</h2>
              <button class="refresh-btn" id="refreshBtn">ğŸ”„ LÃ m má»›i</button>
            </div>

            <div id="filesList" class="table-responsive">
              <!-- Files table will be inserted here -->
            </div>
          </div>
        </div>
      </div>

      <!-- Rename Modal -->
      <div id="renameModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>âœï¸ Äá»•i tÃªn file</h3>
            <p>Nháº­p tÃªn má»›i cho file:</p>
          </div>
          <input type="text" id="renameInput" class="modal-input" placeholder="TÃªn file má»›i...">
          <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelRename">Há»§y</button>
            <button class="modal-btn primary" id="confirmRename">Äá»•i tÃªn</button>
          </div>
        </div>
      </div>

      <!-- Delete Modal -->
      <div id="deleteModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h3>ğŸ—‘ï¸ XÃ³a file</h3>
            <p>Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a file nÃ y khÃ´ng?</p>
            <p><strong id="deleteFileName"></strong></p>
          </div>
          <div class="modal-actions">
            <button class="modal-btn secondary" id="cancelDelete">Há»§y</button>
            <button class="modal-btn danger" id="confirmDelete">XÃ³a</button>
          </div>
        </div>
      </div>

      <!-- Cache indicator -->
      <div class="cache-indicator" id="cacheIndicator">
        Cache: <span id="cacheStatus">Loading...</span>
      </div>
    </div>
  </div>

  <!-- Bootstrap JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
